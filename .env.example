# AutoSpider 环境变量配置示例
# 复制此文件为 .env 并填入实际值

# ===== LLM API 配置 =====
# 多模态 LLM API Key
AIPING_API_KEY=your_api_key_here
# API 基础路径
AIPING_API_BASE=https://your-api-provider.com/v1
# 使用的多模态模型名称
AIPING_MODEL=your-model-name

# Planner 专用模型配置（可选，默认使用主模型）
# SILICON_PLANNER_MODEL=
# SILICON_PLANNER_API_KEY=
# SILICON_PLANNER_API_BASE=

# ===== 浏览器配置 =====
HEADLESS=false
VIEWPORT_WIDTH=1280
VIEWPORT_HEIGHT=720
SLOW_MO=0
STEP_TIMEOUT_MS=30000

# ===== Agent 配置 =====
MAX_STEPS=20

# ===== 日志配置 =====
# 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
# 是否在日志中显示局部变量（调试用）
LOG_SHOW_LOCALS=false
# 是否启用 LLM 输入输出追踪日志（JSONL）
LLM_TRACE_ENABLED=true
# LLM 追踪日志文件路径（相对路径基于项目根目录）
LLM_TRACE_FILE=output/llm_trace.jsonl
# 单字段最大保留字符数（超长会自动截断）
LLM_TRACE_MAX_CHARS=20000

# ===== URL 收集器配置 =====
# 探索阶段进入的详情页数量
EXPLORE_COUNT=3
# 最大滚动次数（单页）
MAX_SCROLLS=5
# 连续无新 URL 的滚动次数后停止
NO_NEW_URL_THRESHOLD=2
# 目标 URL 数量（达到后停止收集）
TARGET_URL_COUNT=50
# 最大翻页次数（分页收集）
MAX_PAGES=10

# ===== 爬取间隔配置（反爬虫）=====
# 页面操作基础延迟（秒）
ACTION_DELAY_BASE=1.0
# 页面操作延迟随机波动范围（秒）
ACTION_DELAY_RANDOM=0.5
# 页面加载等待时间（秒）
PAGE_LOAD_DELAY=1.5
# 滚动操作延迟（秒）
SCROLL_DELAY=0.5
# 调试：打印延迟信息
DEBUG_DELAY=true

# ===== mark_id 验证配置 =====
# 是否启用 mark_id 与文本的验证（防止 LLM 误识别元素）
VALIDATE_MARK_ID=true
# 文本匹配相似度阈值（0-1，使用模糊匹配）
MARK_ID_MATCH_THRESHOLD=0.6
# 调试：打印验证信息
DEBUG_MARK_ID_VALIDATION=true
# 验证失败后的最大重试次数（将错误信息反馈给 LLM 重新选择）
MAX_VALIDATION_RETRIES=1

# ===== Redis 配置（可选）=====
# 是否启用 Redis 存储 URL（断点续爬）
# 需要安装 redis 可选依赖：pip install autospider[redis]
REDIS_ENABLED=false
# Redis 服务器地址
REDIS_HOST=localhost
# Redis 端口
REDIS_PORT=6379
# Redis 密码（如果有）
# REDIS_PASSWORD=
# Redis 数据库索引
REDIS_DB=0
# Redis Key 前缀
REDIS_KEY_PREFIX=autospider:urls

# ===== Pipeline 配置（可选）=====
# URL 通道模式: memory/file/redis
PIPELINE_MODE=memory
# 详情抽取消费者并发数（每个 worker 使用独立页面）
PIPELINE_CONSUMER_CONCURRENCY=3
